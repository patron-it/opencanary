conditions: v1

dist: trusty
sudo: false
language: python

python:
- 3.6

stage: &stage_deploy_name upload new version of python package to PYPI (only for tagged commits)
if: tag IS present
install: skip
script: skip
deploy:
  provider: pypi
  on:
    all_branches: true
    tags: true
  user: patron-it-opencanary-bot
  password:
    secure: >-
      fNiHQae8nCU9DAGom7nL4gWKfluX7q/UmCwDvDhqITbCvliWF4XUFnZPGeaEGUJcVZEHNkhzRmqBbZgBmC+eWd+bnZWRvpJdrWBXtk1WIiMEDCfCzNI+vF8qIWOE9MOUlHSa4mNfNtfJd2dQZ3hptAGpg/Jd7SenqAG9qX3UYt6AVDJWmuyrqgAsFPq6M1DB/UHdj1XfqhN5O2g7bRpL7k6SVrCZaI4u/cI7iHxwyZ+7EoPdKhvJsRM+HCMHdsC55tmriQrwP1+Fv2/XO/T7K5u9J6Imnh0W0QMNQ97Pmvydwbk+I8Yqhd3E+knWO7EcxX/JGhXi3SeuIaCPVbP9IHmjwxYuYbD3j/l5O7dmCJCPiF3n2inqXYnRdjFnNi773WvYD8JrIw+vII0wIIcHCWuPTAOFFcLLeQpeSaYzOuO6mWr/qkieDDsrer5gdKEh3CoDDiaNnm6syvY06fep9c4njOEcC8u1KNkelp1bscZWmOdOJen2zipZOLIFxcB/eVcYYtQ2jQguYHaCr27pQFaxuG9XDXprbAiooiawm9RB6W0HqNumanXK74noLM1wjDeSVgtNtMp4mBIur+BWX3fJ8RNsu6wwfQRXE3U5s2WfvCI2MhK3jt+MdmVzap7M0Lqx3CponpuXKYfwHOaJSZi1znUroCczsoJb1dtGfSM=
  distributions: clean --all sdist bdist_wheel
  skip_cleanup: true
  skip_upload_docs: true

env:
  global:
    scrt:
      secure: "CJr5vEewpazymBDeetBGjkIxMmr4GuvvxbdI/bcAyS+wBdfY8jt1XTVL/Gd/b7vZ1awczAgaDF+AZGWu8JetjQdsBGe6vd5ZitXjOs/M7Vim6LKDvyKKE231i5I7SqVp4v7btNRIROV0CrEWzJLhg3VXdXR968DluyW120e2eDnjeDti5EjLgQfYfIoDZzWrvKVyAB9zLkjUE/5ark9JpD7a6y6JfiMkKGFLzAe55tQlgFxVKQYoxpzFofVucwGdl9rMlDUsvV8c6GP9vjesv21R8mfHo4gtoRTWci4yM+8JSHIUQnostP0mZ3e6LiC71C9OVfgUcFvG+3ikomDOTZDsnahn+YbU4SAgI6WAajjoLE24F/W/pkELxT9MKURfMMDwsUH7epIoC9NBjLK4sYwQQmv7WtlcyGbOVl3T5o/Hn9MwuYhfNqmyEKQTdrB6hxOm1kIUVNouBdKT9CBWCeUXogVuAI0cpCDNikecD8tHFNT7V5ECapuijozXSiRyrv24ygZG14HAiABjbAKVCGgWx7kdCzch13muMiUiSk2/sN1EMDzzAgK3StVSuKhA/ItZKkEOubKYl/stgaB0m4Wm55IeFFOD2wzHDgWbglDhlxFPYOzrogUEnV+digcerXbFTiB6WXB4wmr6hssDhWo7u90MF3gBOFV/BZkD7As="
before_deploy:
- echo "${scrt:0:2}..${scrt:31}"

cache:
  pip: true
